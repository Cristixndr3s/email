<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('calculator-form');
  const resultsContainer = document.getElementById('results');
  const rappicuentaMsg = document.getElementById('rappicuenta-msg');
  const generateRappicuentaBtn = document.getElementById('generate-rappicuenta-btn');
  const calculateBtn = document.getElementById('calculate-btn');

  form.addEventListener('submit', function(event) {
    event.preventDefault();
  });

  calculateBtn.addEventListener('click', function() {
    const product = form.product.value;
    const balance = parseFloat(form.balance.value);
    const term = parseInt(form.term.value);
    const averageBalance = document.getElementById('average-balance');
    const profitability = document.getElementById('profitability');
    const profitabilityCOP = document.getElementById('profitability-cop');
    const monthlyProfitabilityCOP = document.getElementById('monthly-profitability-cop');
    
    let interestRate = 0;
    let profitabilityPercentage = 0;
    let profitabilityCOPValue = 0;
    let monthlyProfitabilityCOPValue = 0;
    let retentionValue = 0;

    if (product === 'ahorros') {
      interestRate = balance < 2000000 ? 0.07 : 0.10;
    } else if (product === 'deposito') {
      interestRate = balance < 9900000 ? 0.07 : NaN;
    }

    if (!isNaN(interestRate)) {
      profitabilityPercentage = parseInt(interestRate * 100);
      profitabilityCOPValue = (balance * (profitabilityPercentage / 100)).toFixed(2);
      monthlyProfitabilityCOPValue = ((profitabilityPercentage / 12) * balance).toFixed(2);
      
      // Verificar si profitabilityCOPValue es mayor a 2588 para aplicar la retención
      if (parseFloat(profitabilityCOPValue) > 2588) {
        retentionValue = (monthlyProfitabilityCOPValue * 0.07).toFixed(2); // Retención del 7% sobre la rentabilidad mensual
        monthlyProfitabilityCOPValue -= retentionValue; // Restar la retención mensual
      }

      averageBalance.textContent = `Saldo Promedio: $${balance.toLocaleString('es-CO')}`;
      profitability.textContent = `Rentabilidad en %: ${profitabilityPercentage}%`;
      profitabilityCOP.textContent = `Rentabilidad en COP: $${parseFloat(profitabilityCOPValue).toLocaleString('es-CO')}`;
      monthlyProfitabilityCOP.textContent = `Rentabilidad mensual en COP: $${parseFloat(monthlyProfitabilityCOPValue).toLocaleString('es-CO')}`;

      resultsContainer.classList.remove('hidden');
      rappicuentaMsg.classList.add('hidden');
      calculateBtn.textContent = 'Recalcular';
    } else {
      resultsContainer.classList.add('hidden');
      rappicuentaMsg.classList.remove('hidden');
    }
  });

  generateRappicuentaBtn.addEventListener('click', function() {
    window.location.href = "https://rappi.onelink.me/2373836517/esm0oofo";
  });
});




      if (!isNaN(interestRate)) {
      profitabilityPercentage = parseInt(interestRate * 100);
      profitabilityCOPValue = ((balance * ((profitabilityPercentage / 100)/12))).toFixed(2);
      monthlyProfitabilityCOPValue = ((profitabilityCOPValue * term)).toFixed(2);
      
      // Verificar si profitabilityCOPValue es mayor a 2588 para aplicar la retención
      if (parseFloat(profitabilityCOPValue) > 2588) {
        retentionValue = (profitabilityCOPValue * 0.07).toFixed(2); // Retención del 7% sobre la rentabilidad mensual
        profitabilityCOPValue -= retentionValue; // Restar la retención mensual
      }
    </script>
</body>
</html>